<div class="quiz-container">
  <div *ngIf="loading" class="loading">
    <p>Loading questions...</p>
  </div>

  <div *ngIf="error" class="error">
    <p>{{ error }}</p>
    <button mat-raised-button color="primary" routerLink="/selection">
      Back to Selection
    </button>
  </div>

  <div *ngIf="!loading && !error && currentQuestion" class="quiz-content">
    <app-progress-bar
      [current]="currentQuestionIndex + 1"
      [total]="questions.length">
    </app-progress-bar>

    <mat-card class="question-card">
      <mat-card-header>
        <mat-card-title>
          Question {{ currentQuestionIndex + 1 }} of {{ questions.length }}
        </mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <h2 class="question-text">{{ currentQuestion.question }}</h2>

        <mat-radio-group
          [(ngModel)]="selectedAnswer"
          class="options-group">
          <mat-radio-button
            *ngFor="let option of currentQuestion.options; let i = index"
            [value]="i"
            class="option">
            {{ option }}
          </mat-radio-button>
        </mat-radio-group>
      </mat-card-content>

      <mat-card-actions class="actions">
        <button
          mat-raised-button
          (click)="previousQuestion()"
          [disabled]="currentQuestionIndex === 0">
          Previous
        </button>

        <button
          mat-raised-button
          color="primary"
          (click)="nextQuestion()"
          [disabled]="!canProceed">
          {{ isLastQuestion ? 'Finish' : 'Next' }}
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
